====================================================================================================
RAN TEXT2SQL - PERFECTION TEST SUITE
====================================================================================================


[TEST 1/24] Basic SELECT - RAN projects (EASY)
  Query: "show me all RAN projects"
  SQL: SELECT * FROM ran_projects
  Tables: ['ran_projects']
  Status: [PASS]

[TEST 2/24] Basic COUNT (EASY)
  Query: "how many RAN projects"
  SQL: SELECT COUNT(*) FROM ran_projects
  Tables: ['ran_projects']
  Status: [PASS]

[TEST 3/24] RAN Level 3 (EASY)
  Query: "show me RAN level 3 items"
  SQL: SELECT * FROM ranlvl3
  Tables: ['items_for_ranlvl3', 'ranlvl3']
  Status: [PASS]

[TEST 4/24] RAN Inventory (EASY)
  Query: "show me RAN inventory"
  SQL: SELECT * FROM ran_inventory
  Tables: ['ran_inventory', 'ranlvl3']
  Status: [PASS]

[TEST 5/24] RAN Antennas (EASY)
  Query: "show me RAN antennas"
  SQL: SELECT * FROM ran_antenna_serials
  Tables: ['ran_antenna_serials', 'ran_lld']
  Status: [PASS]

[TEST 6/24] RAN LLD (EASY)
  Query: "show me RAN LLD"
  SQL: SELECT * FROM RanLLD
  Tables: []
  Status: [FAIL]
    [!] Expected tables: ['ran_lld']

[TEST 7/24] Filter by PO (MEDIUM)
  Query: "show me RAN projects with PO MW123"
  SQL: SELECT * FROM ran_projects WHERE po LIKE '%MW123%'
  Tables: ['ran_projects']
  Status: [PASS]

[TEST 8/24] Filter by site (MEDIUM)
  Query: "show me RAN inventory for site ABC123"
  SQL: SELECT * FROM ran_inventory WHERE site_id = 'ABC123'
  Tables: ['ran_inventory', 'ranlvl3']
  Status: [PASS]

[TEST 9/24] Filter duplicates (MEDIUM)
  Query: "show me duplicate RAN inventory items"
  SQL: SELECT * 
FROM ran_inventory 
WHERE duplicate = 1
  Tables: ['ran_inventory', 'ranlvl3']
  Status: [PASS]

[TEST 10/24] Filter by serial number (MEDIUM)
  Query: "find RAN inventory with serial number 12345"
  SQL: SELECT * FROM ran_inventory WHERE serial_number = '12345'
  Tables: ['ran_inventory', 'ran_antenna_serials']
  Status: [PASS]

[TEST 11/24] Count lvl3 items (MEDIUM)
  Query: "how many RAN lvl3 items"
  SQL: SELECT COUNT(*) 
FROM ranlvl3
  Tables: ['items_for_ranlvl3', 'ranlvl3']
  Status: [PASS]

[TEST 12/24] Total quantity (MEDIUM)
  Query: "total quantity in RAN lvl3"
  SQL: SELECT SUM(total_quantity) FROM ranlvl3 WHERE project_id = 'X'
  Tables: ['ranlvl3', 'items_for_ranlvl3']
  Status: [PASS]

[TEST 13/24] Total price (MEDIUM)
  Query: "sum of total price in RAN lvl3"
  SQL: SELECT SUM(total_price) FROM ranlvl3 WHERE project_id = 'PROJ001_PO123'
  Tables: ['ranlvl3', 'items_for_ranlvl3']
  Status: [PASS]

[TEST 14/24] Count inventory per site (HARD)
  Query: "count RAN inventory items per site"
  SQL: SELECT site_id, COUNT(*) 
FROM ran_inventory 
GROUP BY site_id
  Tables: ['ran_inventory', 'ranlvl3']
  Status: [PASS]

[TEST 15/24] Average quantity (MEDIUM)
  Query: "average quantity in RAN lvl3"
  SQL: SELECT AVG(total_quantity) FROM ranlvl3 WHERE project_id = 'PROJ001_PO123'
  Tables: ['ranlvl3', 'items_for_ranlvl3']
  Status: [PASS]

[TEST 16/24] Top 10 RAN projects (MEDIUM)
  Query: "show me top 10 RAN projects"
  SQL: SELECT TOP 10 pid_po, project_name 
FROM ran_projects 
ORDER BY project_name
  Tables: ['ran_projects']
  Status: [PASS]

[TEST 17/24] RAN lvl3 by quantity (MEDIUM)
  Query: "show me RAN lvl3 items ordered by quantity"
  SQL: SELECT * FROM ranlvl3 ORDER BY total_quantity
  Tables: ['ranlvl3', 'items_for_ranlvl3']
  Status: [PASS]

[TEST 18/24] RAN lvl3 by price DESC (MEDIUM)
  Query: "show me RAN lvl3 sorted by price descending"
  SQL: SELECT * FROM ranlvl3 ORDER BY total_price DESC
  Tables: ['ranlvl3', 'items_for_ranlvl3']
  Status: [PASS]

[TEST 19/24] RAN projects with inventory (HARD)
  Query: "show me RAN projects with their inventory"
  SQL: SELECT p.project_name, i.site_id, i.serial_number 
FROM ran_projects p 
INNER JOIN ran_inventory i ON p.pid_po = i.pid_po
  Tables: ['ran_inventory', 'ran_projects']
  Status: [PASS]

[TEST 20/24] RAN projects with lvl3 (HARD)
  Query: "show me RAN projects with their level 3 items"
  SQL: SELECT r.project_name, rl.item_name AS parent_item, i.item_name AS sub_item, i.quantity, i.price
FROM ran_projects r
INNER JOIN ranlvl3 rl ON r.pid_po = rl.project_id
INNER JOIN items_for_ranlvl3 i ON rl.id = i.ranlvl3_id
  Tables: ['ranlvl3', 'items_for_ranlvl3']
  Status: [PASS]

[TEST 21/24] RAN lvl3 with project names (HARD)
  Query: "show me RAN level 3 items with project names"
  SQL: SELECT l.project_id, p.project_name, l.item_name 
FROM ranlvl3 l 
INNER JOIN ran_projects p ON l.project_id = p.pid_po
  Tables: ['ranlvl3', 'items_for_ranlvl3']
  Status: [PASS]

[TEST 22/24] Complex filter - RAN inventory (HARD)
  Query: "show me RAN inventory for site ABC123 where serial number contains 456"
  SQL: SELECT * FROM ran_inventory WHERE site_id = 'ABC123' AND serial_number LIKE '%456%'
  Tables: ['ran_inventory', 'ran_antenna_serials']
  Status: [PASS]

[TEST 23/24] Complex aggregation (HARD)
  Query: "total price of RAN lvl3 items grouped by category"
  SQL: SELECT SUM(total_price) AS total_price, category 
FROM ranlvl3 
GROUP BY category
  Tables: ['items_for_ranlvl3', 'ranlvl3']
  Status: [FAIL]
    [!] Expected pattern: SUM.*GROUP BY.*category

[TEST 24/24] Count with filter (HARD)
  Query: "how many RAN inventory items have duplicates"
  SQL: SELECT COUNT(*) FROM ran_inventory WHERE duplicate = 1
  Tables: ['ran_inventory', 'ranlvl3']
  Status: [PASS]

====================================================================================================
TEST SUMMARY
====================================================================================================

Easy:   5/6 passed
Medium: 11/11 passed
Hard:   6/7 passed

OVERALL: 22/24 (91.7%)

====================================================================================================
FAILED TESTS
====================================================================================================

[X] RAN LLD
  Query: show me RAN LLD
  Generated: SELECT * FROM RanLLD
  Expected tables: ['ran_lld']
  Got tables: []

[X] Complex aggregation
  Query: total price of RAN lvl3 items grouped by category
  Generated: SELECT SUM(total_price) AS total_price, category 
FROM ranlvl3 
GROUP BY category
  Expected tables: ['ranlvl3']
  Got tables: ['items_for_ranlvl3', 'ranlvl3']

====================================================================================================
